# ğŸš€ PCI Prediction Platform v2.0 - ì—…ê·¸ë ˆì´ë“œ ê°€ì´ë“œ

## ğŸ“‹ ë³€ê²½ ì‚¬í•­ ìš”ì•½

### ğŸ¯ ì£¼ìš” ê°œì„  ì‚¬í•­

**v1.0 (Streamlit)** â†’ **v2.0 (React + Flask)**

- âŒ **ì œê±°**: Streamlit ê¸°ë°˜ UI (app/streamlit_app.py)
- âœ… **ì¶”ê°€**: Flask REST API ë°±ì—”ë“œ (backend/app.py)
- âœ… **ì¶”ê°€**: React + Material-UI í”„ë¡ íŠ¸ì—”ë“œ (frontend/)
- âœ… **ì¶”ê°€**: ì „ë¬¸ì ì´ê³  í˜„ëŒ€ì ì¸ UI/UX
- âœ… **ì¶”ê°€**: REST API ì—”ë“œí¬ì¸íŠ¸
- âœ… **ì¶”ê°€**: ì„¸ì…˜ ê¸°ë°˜ ë°ì´í„° ê´€ë¦¬

---

## ğŸ†š ê¸°ëŠ¥ ë¹„êµ

| ê¸°ëŠ¥ | v1.0 (Streamlit) | v2.0 (React + Flask) |
|------|------------------|----------------------|
| **UI í”„ë ˆì„ì›Œí¬** | Streamlit | React 18 + Material-UI |
| **ë””ìì¸** | ê¸°ë³¸ í…Œë§ˆ | ì „ë¬¸ì ì¸ ê·¸ë¼ë°ì´ì…˜ ë””ìì¸ |
| **ë°˜ì‘ ì†ë„** | ëŠë¦¼ (í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨) | ë¹ ë¦„ (SPA) |
| **API ì œê³µ** | âŒ | âœ… REST API |
| **ì»¤ìŠ¤í„°ë§ˆì´ì§•** | ì œí•œì  | ì™„ì „í•œ ììœ ë„ |
| **ë°°í¬** | Streamlit Cloud ì˜ì¡´ | ë…ë¦½ ì„œë²„ |
| **ëª¨ë°”ì¼ ì§€ì›** | ì œí•œì  | ë°˜ì‘í˜• ë””ìì¸ |
| **ê°œë°œì ë„êµ¬** | ì œí•œì  | ì™„ì „í•œ DevTools ì§€ì› |

---

## ğŸ“¦ ìƒˆë¡œìš´ íŒŒì¼ êµ¬ì¡°

```
webapp/
â”œâ”€â”€ backend/
â”‚   â””â”€â”€ app.py                          # Flask REST API ì„œë²„ (NEW!)
â”‚
â”œâ”€â”€ frontend/                            # React í”„ë¡ íŠ¸ì—”ë“œ (NEW!)
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ main.jsx                    # ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”‚       â”œâ”€â”€ App.jsx                     # ë©”ì¸ ì•±
â”‚       â”œâ”€â”€ index.css
â”‚       â”œâ”€â”€ components/
â”‚       â”‚   â””â”€â”€ steps/
â”‚       â”‚       â”œâ”€â”€ DataCollectionStep.jsx
â”‚       â”‚       â”œâ”€â”€ FeatureExtractionStep.jsx
â”‚       â”‚       â”œâ”€â”€ ModelTrainingStep.jsx
â”‚       â”‚       â”œâ”€â”€ ShapAnalysisStep.jsx
â”‚       â”‚       â””â”€â”€ FooDBPredictionStep.jsx
â”‚       â””â”€â”€ services/
â”‚           â””â”€â”€ api.js                  # API í´ë¼ì´ì–¸íŠ¸
â”‚
â”œâ”€â”€ modules/                             # ê¸°ì¡´ Python ëª¨ë“ˆ (ìœ ì§€)
â”‚   â”œâ”€â”€ data_collector.py
â”‚   â”œâ”€â”€ feature_extractor.py
â”‚   â”œâ”€â”€ decoy_generator.py
â”‚   â”œâ”€â”€ model_trainer.py
â”‚   â”œâ”€â”€ shap_analyzer.py
â”‚   â””â”€â”€ foodb_predictor.py
â”‚
â”œâ”€â”€ app/                                 # DEPRECATED (v1.0 Streamlit)
â”‚   â””â”€â”€ streamlit_app.py                # ë” ì´ìƒ ì‚¬ìš© ì•ˆ í•¨
â”‚
â”œâ”€â”€ start.sh                             # ìƒˆë¡œìš´ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸ (NEW!)
â”œâ”€â”€ test_api.py                          # API í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ (NEW!)
â”œâ”€â”€ requirements.txt                     # ì—…ë°ì´íŠ¸ë¨
â””â”€â”€ README.md                            # ì™„ì „íˆ ì¬ì‘ì„±ë¨
```

---

## ğŸ”§ ìƒˆë¡œìš´ ê¸°ìˆ  ìŠ¤íƒ

### ë°±ì—”ë“œ
- **Flask 3.0**: ê²½ëŸ‰ REST API ì„œë²„
- **Flask-CORS**: Cross-Origin Resource Sharing
- ê¸°ì¡´ ëª¨ë“ˆ (RDKit, scikit-learn, TabPFN, SHAP) ì¬ì‚¬ìš©

### í”„ë¡ íŠ¸ì—”ë“œ
- **React 18.2**: í˜„ëŒ€ì ì¸ UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **Material-UI (MUI) 5.15**: ì „ë¬¸ì ì¸ ë””ìì¸ ì»´í¬ë„ŒíŠ¸
- **Vite**: ë¹ ë¥¸ ë¹Œë“œ ë„êµ¬
- **Axios**: HTTP í´ë¼ì´ì–¸íŠ¸
- **Notistack**: ì•Œë¦¼ ì‹œìŠ¤í…œ
- **Recharts**: ë°ì´í„° ì‹œê°í™”

---

## ğŸš€ ì‹¤í–‰ ë°©ë²• ë³€ê²½

### v1.0 (Streamlit)
```bash
streamlit run app/streamlit_app.py
```

### v2.0 (React + Flask) â­
```bash
./start.sh
```

**ë˜ëŠ” ìˆ˜ë™ ì‹¤í–‰:**

**í„°ë¯¸ë„ 1 - ë°±ì—”ë“œ:**
```bash
cd backend
python app.py
```

**í„°ë¯¸ë„ 2 - í”„ë¡ íŠ¸ì—”ë“œ:**
```bash
cd frontend
npm run dev
```

---

## ğŸ“¡ ìƒˆë¡œìš´ REST API ì—”ë“œí¬ì¸íŠ¸

```
GET  /api/health                        # ì„œë²„ ìƒíƒœ í™•ì¸
POST /api/collect-data                  # ë°ì´í„° ìˆ˜ì§‘
POST /api/prepare-features              # íŠ¹ì„± ë³€í™˜
POST /api/train-model                   # ëª¨ë¸ í•™ìŠµ
POST /api/shap-analysis                 # SHAP ë¶„ì„
POST /api/predict-foodb                 # FooDB ì˜ˆì¸¡
GET  /api/results/<filename>            # ê²°ê³¼ ë‹¤ìš´ë¡œë“œ
GET  /api/sessions                      # ì„¸ì…˜ ëª©ë¡
```

**Pythonì—ì„œ API ì‚¬ìš© ì˜ˆì‹œ:**
```python
import requests

# ë°ì´í„° ìˆ˜ì§‘
response = requests.post('http://localhost:5000/api/collect-data', json={
    'gene_names': ['FTO'],
    'ic50_threshold': 10000
})
session_id = response.json()['session_id']
```

---

## ğŸ¨ UI/UX ê°œì„  ì‚¬í•­

### ë””ìì¸
- âœ… **ê·¸ë¼ë°ì´ì…˜ ë°°ê²½**: ì „ë¬¸ì ì¸ ë³´ë¼-íŒŒë‘ ê·¸ë¼ë°ì´ì…˜
- âœ… **Material-UI ì»´í¬ë„ŒíŠ¸**: ë²„íŠ¼, ì¹´ë“œ, í…Œì´ë¸”, ì¹© ë“±
- âœ… **Typography**: Inter + Noto Sans KR í°íŠ¸
- âœ… **ì• ë‹ˆë©”ì´ì…˜**: Fade-in, í˜¸ë²„ íš¨ê³¼
- âœ… **ì»¤ìŠ¤í…€ í…Œë§ˆ**: í”„ë¼ì´ë¨¸ë¦¬/ì„¸ì»¨ë”ë¦¬ ìƒ‰ìƒ ì‹œìŠ¤í…œ

### ì‚¬ìš©ì„±
- âœ… **5ë‹¨ê³„ Stepper**: ì§„í–‰ ìƒí™© ì‹œê°í™”
- âœ… **ì‹¤ì‹œê°„ ë¡œë”©**: ê° ë‹¨ê³„ë³„ ë¡œë”© ìƒíƒœ í‘œì‹œ
- âœ… **ì—ëŸ¬ í•¸ë“¤ë§**: ì¹œì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€
- âœ… **ì•Œë¦¼ ì‹œìŠ¤í…œ**: Snackbarë¡œ ì„±ê³µ/ì‹¤íŒ¨ ì•Œë¦¼
- âœ… **CSV ë‹¤ìš´ë¡œë“œ**: ì›í´ë¦­ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼
- âœ… **ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ**: ëª¨ë°”ì¼/íƒœë¸”ë¦¿/ë°ìŠ¤í¬í†± ì§€ì›

---

## ğŸ“¥ ì„¤ì¹˜ ë° ì—…ê·¸ë ˆì´ë“œ ì ˆì°¨

### 1. ì €ì¥ì†Œ ì—…ë°ì´íŠ¸
```bash
git pull origin main
```

### 2. Python ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
```bash
pip install -r requirements.txt
```

### 3. Node.js ì„¤ì¹˜ í™•ì¸
```bash
node --version  # v18+ ê¶Œì¥
npm --version
```

Node.jsê°€ ì—†ë‹¤ë©´: https://nodejs.org/ ì—ì„œ ë‹¤ìš´ë¡œë“œ

### 4. í”„ë¡ íŠ¸ì—”ë“œ ì˜ì¡´ì„± ì„¤ì¹˜
```bash
cd frontend
npm install
cd ..
```

### 5. ì‹¤í–‰
```bash
./start.sh
```

ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì ‘ì†!

---

## ğŸ§ª í…ŒìŠ¤íŠ¸

### API í…ŒìŠ¤íŠ¸
```bash
# ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¼ ë•Œ
python test_api.py
```

### í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì ‘ì† í›„:
1. FTO ìœ ì „ìë¡œ ë°ì´í„° ìˆ˜ì§‘
2. ECFP4 fingerprintë¡œ íŠ¹ì„± ë³€í™˜
3. TabPFN ëª¨ë¸ í•™ìŠµ
4. SHAP ë¶„ì„ ì‹¤í–‰
5. FooDB ì˜ˆì¸¡

---

## ğŸ”„ ë§ˆì´ê·¸ë ˆì´ì…˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Git ì €ì¥ì†Œ ìµœì‹  ë²„ì „ìœ¼ë¡œ ì—…ë°ì´íŠ¸
- [ ] Python ì˜ì¡´ì„± ì¬ì„¤ì¹˜
- [ ] Node.js ì„¤ì¹˜ í™•ì¸
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì˜ì¡´ì„± ì„¤ì¹˜
- [ ] ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
- [ ] í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
- [ ] API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
- [ ] ì „ì²´ ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
- [ ] ê²°ê³¼ CSV ë‹¤ìš´ë¡œë“œ í™•ì¸

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### Streamlit ì•± (app/streamlit_app.py)
- **ìƒíƒœ**: DEPRECATED (ë” ì´ìƒ ìœ ì§€ë³´ìˆ˜ ì•ˆ í•¨)
- **ì¶”ì²œ**: v2.0 React ì•± ì‚¬ìš©
- **ì´ìœ **: React ì•±ì´ í›¨ì”¬ ë¹ ë¥´ê³  ì „ë¬¸ì ì´ë©° í™•ì¥ ê°€ëŠ¥

### ë°ì´í„° í˜¸í™˜ì„±
- âœ… ê¸°ì¡´ ë°ì´í„° í¬ë§· 100% í˜¸í™˜
- âœ… ëª¨ë“  Python ëª¨ë“ˆ ì¬ì‚¬ìš©
- âœ… ì €ì¥ëœ ëª¨ë¸ ë° ê²°ê³¼ íŒŒì¼ í˜¸í™˜

### í¬íŠ¸ ì„¤ì •
- **ë°±ì—”ë“œ**: 5000 (Flask)
- **í”„ë¡ íŠ¸ì—”ë“œ**: 3000 (Vite)

í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë©´:
```bash
# ë°±ì—”ë“œ í¬íŠ¸ ë³€ê²½
# backend/app.pyì—ì„œ app.run(port=5000) ìˆ˜ì •

# í”„ë¡ íŠ¸ì—”ë“œ í¬íŠ¸ ë³€ê²½
# frontend/vite.config.jsì—ì„œ server.port ìˆ˜ì •
```

---

## ğŸ†˜ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### "Cannot connect to the server"
```bash
# ë°±ì—”ë“œ ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
cd backend && python app.py
```

### "Module not found: flask"
```bash
pip install -r requirements.txt
```

### "npm: command not found"
```bash
# Node.js ì„¤ì¹˜ í•„ìš”
# https://nodejs.org/ ì—ì„œ ë‹¤ìš´ë¡œë“œ
```

### CORS ì—ëŸ¬
- Flask-CORSê°€ ì„¤ì¹˜ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ í›„ ì¬ì‹œë„

### RDKit ì„¤ì¹˜ ì˜¤ë¥˜
```bash
# Conda í™˜ê²½ì—ì„œ ì„¤ì¹˜ (ê¶Œì¥)
conda install -c conda-forge rdkit
```

---

## ğŸ“Š ì„±ëŠ¥ ë¹„êµ

| ì§€í‘œ | v1.0 (Streamlit) | v2.0 (React + Flask) |
|------|------------------|----------------------|
| **ì´ˆê¸° ë¡œë”© ì‹œê°„** | ~5ì´ˆ | ~1ì´ˆ |
| **ë‹¨ê³„ ì „í™˜** | ~2ì´ˆ (ìƒˆë¡œê³ ì¹¨) | <0.1ì´ˆ (ì¸ìŠ¤í„´íŠ¸) |
| **ë©”ëª¨ë¦¬ ì‚¬ìš©** | ë†’ìŒ | ë‚®ìŒ |
| **ì‚¬ìš©ì ê²½í—˜** | ğŸŸ¡ ë³´í†µ | â­ ìš°ìˆ˜ |
| **ì „ë¬¸ì„±** | ğŸŸ¡ í”„ë¡œí† íƒ€ì… ìˆ˜ì¤€ | â­ í”„ë¡œë•ì…˜ ìˆ˜ì¤€ |

---

## ğŸ¯ í–¥í›„ ê³„íš (v3.0)

- [ ] Docker ì»¨í…Œì´ë„ˆí™”
- [ ] í´ë¼ìš°ë“œ ë°°í¬ (AWS/GCP/Azure)
- [ ] ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ
- [ ] ê²°ê³¼ ë°ì´í„°ë² ì´ìŠ¤ ì €ì¥
- [ ] ì‹¤ì‹œê°„ í˜‘ì—… ê¸°ëŠ¥
- [ ] ê³ ê¸‰ ì‹œê°í™” (3D ë¶„ì êµ¬ì¡°)
- [ ] ë°°ì¹˜ ì²˜ë¦¬ ì‹œìŠ¤í…œ
- [ ] ì„±ëŠ¥ ìµœì í™” (ìºì‹±, CDN)

---

## ğŸ’¬ í”¼ë“œë°± ë° ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´:
1. **GitHub Issues**: https://github.com/HeejeongH/Functional-Food-Predictor/issues
2. **README.md**: ìµœì‹  ë¬¸ì„œ í™•ì¸
3. **TROUBLESHOOTING.md**: ì¼ë°˜ì ì¸ ë¬¸ì œ í•´ê²°

---

## ğŸ‰ ê°ì‚¬í•©ë‹ˆë‹¤!

v2.0ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œí•´ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. 
í›¨ì”¬ ë” ì „ë¬¸ì ì´ê³  ë¹ ë¥¸ ê²½í—˜ì„ ì œê³µí•  ê²ƒì…ë‹ˆë‹¤! ğŸš€

**Happy Predicting! ğŸ§¬ğŸ’Š**
